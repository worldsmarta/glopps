
// export const productArea=["","VOLVO TRUCK & BUS", "MACK", "RENAULT", "UD TRUCKS", "EICHER TRUCK & BUS","VOLVO CE","VOLVO PENTA" ];

export const productArea={"":"","VTB":"VOLVO TRUCK & BUS", "MACK":"MACK", "RENAULT":"RENAULT","UD": "UD TRUCKS", "ETB":"EICHER TRUCK & BUS","VCE":"VOLVO CE",
  "PENTA":"VOLVO PENTA" };

export const gdaDatabase={
     '100|VO':{name:'DUMMY',partStageVersion:'P/001',brandMark:'0 - No Branding',
      data:[
      {id:'1',prodarea:'VTB',gda:'EU',designation:'GENT',consumer:'1002',comp:'03',lda:'',IntroDate:'19930607',type:'S',qty:'0',supcode:'',orderfinal:'',userid:'IMS',chgdte:'20111021'},
      {id:'2',prodarea:'VTB',gda:'NA',designation:'BYHALIA/COLUMBUS',consumer:'4173',comp:'03',lda:'',IntroDate:'19930607',type:'S',qty:'0',supcode:'',orderfinal:'',userid:'IMS',chgdte:'20111021'},
      {id:'3',prodarea:'VTB',gda:'AUS',designation:'MINTO',consumer:'7835',comp:'03',lda:'',IntroDate:'',type:'S',qty:'',supcode:'',orderfinal:'',userid:'',chgdte:''},
      {id:'4',prodarea:'VTB',gda:'AUS',designation:'LDA',consumer:'',comp:'03',lda:'',IntroDate:'',type:'',qty:'',supcode:'',orderfinal:'',userid:'',chgdte:''},
      {id:'5',prodarea:'UD',gda:'ASIA',designation:'AGEO',consumer:'2924',comp:'03',lda:'',IntroDate:'',type:'S',qty:'',supcode:'',orderfinal:'',userid:'',chgdte:''},
      {id:'6',prodarea:'MACK',gda:'AUS',designation:'MINTO',consumer:'5741',comp:'03',lda:'',IntroDate:'',type:'S',qty:'',supcode:'',orderfinal:'',userid:'',chgdte:''},
      {id:'7',prodarea:'VTB',gda:'SA',designation:'LDA',consumer:'',comp:'03',lda:'',IntroDate:'',type:'',qty:'',supcode:'',orderfinal:'',userid:'',chgdte:''}

      ]
    },

    '100|VOE':{name:'DUMMY',partStageVersion:'P/001',brandMark:'0 - No Branding',
      data:[
      {id:'1',prodarea:'VCE',gda:'EU',designation:'GENT/ESKILSTUNA',consumer:'100',comp:'01',lda:'',IntroDate:'20230706',type:'S',qty:'0',supcode:'',orderfinal:'',userid:'E123248',chgdte:'20230706'},
      {id:'2',prodarea:'VCE',gda:'EU',designation:'SINGAPORE',consumer:'7905',comp:'01',lda:'',IntroDate:'20070325',type:'S',qty:'0',supcode:'',orderfinal:'',userid:'R115L9',chgdte:'20070325'},
      {id:'3',prodarea:'VCE',gda:'NA',designation:'BYHALIA/COLUMBUS',consumer:'4048',comp:'01',lda:'',IntroDate:'19980706',type:'S',qty:'0',supcode:'',orderfinal:'',userid:'Z051378',chgdte:'20020407'},
      {id:'4',prodarea:'VCE',gda:'EU',designation:'MOTHERWELL',consumer:'8475',comp:'01',lda:'',IntroDate:'',type:'S',qty:'',supcode:'',orderfinal:'',userid:'',chgdte:''},
      {id:'5',prodarea:'VCE',gda:'EU',designation:'KOREA',consumer:'16647',comp:'01',lda:'',IntroDate:'',type:'S',qty:'',supcode:'',orderfinal:'',userid:'',chgdte:''},
      {id:'6',prodarea:'VCE',gda:'SA',designation:'CURTIBA',consumer:'2809',comp:'01',lda:'',IntroDate:'',type:'S',qty:'',supcode:'',orderfinal:'',userid:'',chgdte:''},

      ]
    },

     '100|VOP':{name:'DUMMY',partStageVersion:'P/001',brandMark:'0 - No Branding',
      data:[
         {id:'1',prodarea:'PENTA',gda:'EU',designation:'GENT',consumer:'1618',comp:'04',lda:'',IntroDate:'20151209',type:'S',qty:'0',supcode:'',orderfinal:'',userid:'Z051378',chgdte:'20151209'},
      {id:'2',prodarea:'PENTA',gda:'NA',designation:'BYHALIA',consumer:'4125',comp:'04',lda:'',IntroDate:'20151209',type:'S',qty:'0',supcode:'',orderfinal:'',userid:'Z051378',chgdte:'20151209'},
      {id:'3',prodarea:'PENTA',gda:'SA',designation:'CURTIBA',consumer:'8441',comp:'04',lda:'',IntroDate:'20160926',type:'S',qty:'0',supcode:'',orderfinal:'',userid:'Z051378',chgdte:'20160926'},
      ]
     },
    
    

    '990950|VO':{name:'	FLANGE LOCK NUT',partStageVersion:'P/002',brandMark:'0 - No Branding',
      data:[
         {id:'1',prodarea:'VTB',gda:'AUS',designation:'VBA/AUS PROD',consumer:'7826',comp:'03',lda:'',IntroDate:'20101004',type:'P',qty:'555',supcode:'',orderfinal:'',userid:'R115D5',chgdte:'20100620'},
         {id:'2',prodarea:'RENAULT',gda:'EU',designation:'LYON',consumer:'31971',comp:'03',lda:'',IntroDate:'20090907',type:'S',qty:'0',supcode:'',orderfinal:'',userid:'R115D5',chgdte:'20100620'},
         {id:'3',prodarea:'MACK',gda:'AUS',designation:'MINTO',consumer:'5741',comp:'03',lda:'',IntroDate:'',type:'S',qty:'',supcode:'',orderfinal:'',userid:'',chgdte:''},
         {id:'4',prodarea:'UD',gda:'ASIA',designation:'AGEO',consumer:'2924',comp:'03',lda:'',IntroDate:'20130729',type:'S',qty:'0',supcode:'',orderfinal:'',userid:'R338253',chgdte:'20130506'},
         {id:'5',prodarea:'RENAULT',gda:'EU',designation:'RENAULT',consumer:'31972',comp:'03',lda:'',IntroDate:'20090907',type:'P',qty:'0',supcode:'',orderfinal:'',userid:'R115D5',chgdte:'20100620'},
         {id:'6',prodarea:'MACK',gda:'NA',designation:'MACUNGIE',consumer:'4285',comp:'03',lda:'',IntroDate:'20090907',type:'P',qty:'0',supcode:'',orderfinal:'',userid:'R115D5',chgdte:'20100620'},
         {id:'7',prodarea:'VTB',gda:'SA',designation:'VDB/TRUCK',consumer:'2800',comp:'03',lda:'',IntroDate:'20090907',type:'P',qty:'0',supcode:'',orderfinal:'',userid:'R115D5',chgdte:'20100620'},

      ]
    }

}

//required for getting the full product area on a tooltip on hover
export const fullProductAreaName = (abbr) => productArea[abbr] || abbr;
export function getAvailablePrefixes(partNumber) {
  const prefixes = Object.keys(gdaDatabase) .filter(key => key.startsWith(`${partNumber}|`)) .map(key => key.split('|')[1]);
  return prefixes;
}

export function getResponseFieldsData(partNumber,prefix){
  const key = `${partNumber}|${prefix}`;
  return new Promise((resolve) => {
    const result = gdaDatabase[key] || [];

    setTimeout(() => resolve(result), 300);
  });
}

const fullNameToAbbr = Object.entries(productArea).reduce((acc, [abbr, fullName]) => {
  acc[fullName] = abbr;
  return acc;
}, {});

export function getGdaData(partNumber, prefix, productArea, showPusers) {
  const key = `${partNumber}|${prefix}`;
  return new Promise((resolve) => {
    const dt = gdaDatabase[key]?.data || [];
    // Convert full name to abbreviation if needed
    const abbr = fullNameToAbbr[productArea];

    // If productArea is empty, return all data
    const filteredByArea = !productArea? dt: abbr ? dt.filter(item => item.prodarea === abbr): dt.filter(item => item.prodarea === productArea);

    // Filter based on showPusers
    //showPusers is not checked and productArea is blank: display all rows except type P
    //showPusers is checked and productArea is blank: display all rows along with type P
    //showPusers is checked and productArea is selected: display all rows with product area
    const finalResult = showPusers ? filteredByArea: filteredByArea.filter(item => item.type === 'S' || item.type==='');
    setTimeout(() => resolve(finalResult), 300);
  });
}